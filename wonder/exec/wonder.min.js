/*! Wonder - v1.0.0 - 2014-09-25 */function mainSidebarCalcs(){var a=$(".sidebarConversation").outerHeight(!0),b=$(window).height()-$(".sidebarHeader").outerHeight(!0)-$(".sidebarConversation").outerHeight(!0)-$(".sidebarFooter").outerHeight(!0)-$(".mainHeader").outerHeight(!0)-$(".mainFooter").outerHeight(!0);$(".sidebarConversation").is(":visible")?0:b+=a,$(".sidebarBodyInner").css("height",b-45)}function editGroupName(){$(".sidebarBodyInner .panel-title > a:first-child").dblclick(function(){var a=$(this);a.prop("contentEditable",!0),a.blur(),a.focus(),$(window).on("click",function(){a.prop("contentEditable",!1)})})}function timerCall(a){return a>9?a:"0"+a}function timer(){{var a=0;setInterval(function(){if($(".timerS").html(timerCall(++a%60)),$(".timerM").html(timerCall(parseInt(a/60,10)%60)),$(".timerH").html(timerCall(parseInt(a/3600,10))),3600==a){var b=$(".sidebarConversation"),c=$(".audioScreen");b.find(".callDuration").empty().append('(<span class="timerH"></span>:<span class="timerM"></span>)'),c.find(".callNote.timer").empty().append('<span class="timerH"></span>:<span class="timerM"></span>')}},1e3)}}$(function(){mainSidebarCalcs(),editGroupName(),timer(),$(".dialPad button").on("click",function(){"dialPad-call"===$(this).parent().attr("id")&&($("#numPadModal").find(".modal-header").css("background-color","#32d167"),$("#numPadModal").find(".dialMsg").empty().append('Aguardando resposta <span class="dot">.</span><span class="dot">.</span><span class="dot">.</span>')),"dialPad-end"===$(this).parent().attr("id")&&($("#numPadModal").find(".modal-header").css("background-color","#414d63"),$("#numPadModal").find(".dialScreen, .dialMsg").empty());var a=$(this).text();$(".dialScreen").append(a);var b=$(".dialScreen").text().length;$(".dialScreen").css(b>10?{width:"300px","font-size":"24px","overflow-x":"auto"}:{width:"295px","font-size":"44px"})}),$('[data-target="#removeUserModal"]').on("click",function(){var a=$(this),b=$("#removeUserModal"),c=a.parents().eq(2),d=c.find(".avatar+span").text();b.find("label > span").text(d),$(".removeUserBtn").on("click",function(){c.remove()})}),$('[data-target="#removeFileModal"]').on("click",function(){var a=$(this),b=$("#removeFileModal"),c=a.parent(),d=c.find(".sFFileName").text();b.find("label > span").text(d),$(".removeFileBtn").on("click",function(){c.remove()})}),$(".sFAddFileBtn").on("click",function(){$(".sFUpload").toggle()}),$(".sFUpload button").on("click",function(){$(".sFUpload").hide()}),$("#addUserModal .modalSearchResults .wonderBtn").on("click",function(){var a=$(this),b=$(this).parent().prev().find("span").text(),c=$(this).parent().prev().find("img").attr("src");a.closest("li").remove(),$(".sidebarBodyInner .panel:last-child").find(".sidebarContacts").append('<li><div class="avatar avatar-sm pull-left"><img src="'+c+'" alt="Img"></div><span class="font18">'+b+'</span><p><i class="fa fa-circle green font8 clearfix"></i> on-line</p> <ul class="list-inline userListOptions pull-right"><li><button class="button-sm"><i class="fa fa-phone font18"></i></button></li><li><button class="button-sm"><i class="fa fa-video-camera font18"></i></button></li><li><button class="button-sm"><i class="fa fa-user font18"><span>-</span></i></button></li></ul></li>')}),$("#sendInviteModal .modalSearchResults .wonderBtn").on("click",function(){var a=$(this),b=$(this).parent().prev().find("span").text(),c=$(this).parent().prev().find("img").attr("src");a.closest("li").remove(),$(".videoScreen").find(".videoPIP ul").append('<li><div class="inviteConfirm"><div class="avatarWrapper"><div class="avatar avatar-sm"><a href="#"><img src="'+c+'" alt="Img"></a></div><div class="avatarTag" style="color: rgb(65, 77, 99);"><i class="fa fa-circle green font12"></i>'+b+'</div><button class="cancelInvite wonderBtn font14"><i class="fa fa-phone endCall font14"></i> Cancelar convite</button></div></div></li>'),$(".audioVideoGroup ul").append('<li class="avatar avatar-sm"><img src="'+c+'"/></li>'),$(".chatMessages").append('<li class="info"><img class="avatar avatar-sm" src="css/images/info.png" alt="Img"/><span>Convidou <i class="fa fa-circle green font8"></i> <span class="cancelInviteID">'+b+'</span> para a vÃ­deo-chamada. <a class="cancelInviteLink"><i class="fa fa-phone endCall font14"></i> Cancelar convite?</a><p>'+chatDate+"</p></span></li>")}),$("#sendInviteModal").on("hidden.bs.modal",function(){$(".cancelInvite").on("click",function(){var a=$(this),b=a.prev().text(),c=a.parent().find(".avatar img").attr("src");$(".cancelInviteID:contains("+b+")").next().removeAttr("onclick").addClass("canceledInvite").text("Convite Cancelado"),$('.audioVideoGroup [src="'+c+'"]').parent().remove(),a.closest("li").remove(),$(".chatMessages").append('<li class="info"><img class="avatar avatar-sm" src="css/images/info.png" alt="Img"/><span>O convite feito a <i class="fa fa-circle green font8"></i> '+b+" foi cancelado por Afonso Neves.<p>"+chatDate+"</p></span></li>")}),$(".cancelInviteLink").on("click",function(){var a=$(this),b=a.prev().text();$(".inviteConfirm .avatarTag:contains("+b+")").next().trigger("click")})}),$(".userTag").on("show.bs.dropdown hide.bs.dropdown",function(){$(".statusTag").find("i:last-child").toggleClass("fa-angle-down fa-angle-up")}),$(".statusTag").next().find("a").on("click",function(){var a=$(this),b=$(".statusTag").clone(!0).find("i:last-child").remove().end().html();$(".statusTag").empty().append(a.html()+'<i class="fa fa-angle-up font14 pull-right"></i>'),a.empty().append(b)}),$(".addGroupBtn").on("click",function(){var a=$(this).prev().val(),b=$(".sidebarBodyInner").find(".panel").length;$('<div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" data-target="#collapse'+b+'" href="#">\n                        '+a+'</a><i class="fa"></i></h4></div><div id="collapse'+b+'" class="panel-collapse collapse"><div class="panel-body"><ul class="list-unstyled sidebarContacts"><span class="noContactsInList">\n                          NÃ£o existe nenhum contacto neste grupo</span></ul></div></div></div>').insertBefore(".sidebarBodyInner > .panel:last-child"),$(".sidebarBodyInner .panel:last-child").find(".panel-title a").attr("data-target","#collapse"+(b+1)),$(".sidebarBodyInner .panel:last-child").find(".panel-collapse").attr("id","collapse"+(b+1)),editGroupName()}),$('[data-target="#removeGroupModal"]').on("click",function(){$("#removeGroupModal").find(".removeGroups").empty(),$(".sidebarBodyInner").find(".panel:not(:last-child)").not().each(function(){var a=$(this).find(".panel-title").text();$("#removeGroupModal").find(".removeGroups").append('<li class="clearfix"><div class="pull-left font18">'+a+'</div><div class="pull-right"> <button class="removeGroupBtn wonderBtn pull-right font18"><i class="fa fa-folder-open composed"><span>-</span></i> Remover</button></div></li>')}),$(".removeGroupBtn").on("click",function(){var a=$(this),b=a.closest("li").index()+1,c=$("#collapse"+b),d=c.find(".sidebarContacts").html();$(".sidebarBodyInner .panel:last-child").find(".sidebarContacts").append(d).find(".noContactsInList").remove(),a.closest("li").remove(),c.closest(".panel").remove()})})}),$(window).on("resize",function(){mainSidebarCalcs()});