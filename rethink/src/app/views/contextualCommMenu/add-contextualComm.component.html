<ng-template #content let-c="close" let-d="dismiss">

  <div class="row justify-content-center">
    <div class="col-8">

      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{title}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <form class="context" #createContext="ngForm" (ngSubmit)="submitForm(createContext.value)" (submit)="c('success')">

        <div class="modal-body">

          <div class="form-group {{ name.errors ? 'has-danger' : 'has-success' }}">
            <label for="name">Context Name</label>
    
            <input type="text" id="name" class="form-control {{ name.errors ? 'form-control-danger' : 'form-control-success' }}"
               required minlength="4" maxlength="24"
               aria-describedby="nameHelp" placeholder="Context name" 
               name="name" [(ngModel)]="model.name"
               #name="ngModel">

            <!-- <div class="form-control-feedback">Success! You've done it.</div> -->

            <div *ngIf="name.errors" class="form-control-feedback">
              <span [hidden]="!name.errors.required">Name is required</span>
              <span [hidden]="!name.errors.minlength">Name must be at least 4 characters long.</span>
              <span [hidden]="!name.errors.maxlength">Name cannot be more than 24 characters long.</span>
            </div>
  
            <small id="nameHelp" class="form-text text-muted">Enter the context name you want create.</small>

          </div>

          <div class="form-group">
            <label for="icon">Icons</label>

            <div id="icons" class="form-control form-group-control" [(ngModel)]="model.icon" ngbRadioGroup name="icon">
              <label *ngFor="let icon of icons; let i = index" class="btn btn-primary">
                <input type="radio" name="icons" id="{{icon}}" value="{{icon}}" autocomplete="off"><i class="fa fa-{{icon}}"></i> 
              </label>
            </div>

          </div>

          <div class="form-group {{ parent.errors ? 'has-danger' : 'has-success' }}">
            <label>Select the main context</label>
            <select class="form-control" name="parent" id="parent" #parent="ngModel" [(ngModel)]="model.parent">
              <option *ngFor="let context of contextualComms | async; let i = index" value="{{context.id}}">{{context.name}}</option>
            </select>

            <div *ngIf="parent.errors" class="form-control-feedback">
              <span [hidden]="!parent.errors.required">Main context is required</span>
            </div>

          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="c('Close click')">Close</button>
          <button type="submit" class="btn btn-success" [disabled]="!createContext.form.valid">Save changes</button>
        </div>

      </form>
    </div>
  </div>

</ng-template>

<a href="javascript:;" class="add-button" (click)="open(content)">
  <span class="add-user"><a href="javascript:;">+</a></span>
  <span class="add-text">new context</span>
</a>